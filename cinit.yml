---
programs:
  - name: sleep
    path: /bin/sleep
    args:
      - 5
    before:
      - ampel2
  - name: ampel2
    path: /app/ampel2
    args:
      - "-postgres-url"
      - "{{SIP_POSTGRES_DB_USER}}:{{SIP_POSTGRES_DB_PW}}@{{SIP_POSTGRES_DB_SERVER}}:{{SIP_POSTGRES_DB_PORT}}/{{SIP_POSTGRES_DB_NAME}}?sslmode=disable"
      - "-client-id"
      - "{{SIP_AUTH_OIDC_CLIENT_ID}}"
    env:
      - SIP_POSTGRES_DB_SERVER:
      - SIP_POSTGRES_DB_PORT:
      - SIP_POSTGRES_DB_NAME:
      - SIP_POSTGRES_DB_USER:
      - SIP_POSTGRES_DB_PW:
      - SIP_AUTH_OIDC_CLIENT_ID:

    capabilities:
      - CAP_NET_BIND_SERVICE
